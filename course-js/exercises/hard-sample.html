<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Console Render Sample</title>
</head>
<body>
<script>
// Глобальные переменные
var
	renderIteration = 0,
	fieldSizeX = 10,
	fieldSizeY = 10,
	heroX = 1,
	heroY = 1;

// Функция отрисовки
function render() {
	console.clear();
	console.log( 'iteration:', renderIteration, 'x:', heroX, 'y:', heroY );

	// Отрисовка первого ряда с числами
	let firstLine = '■  ';

	for ( let x = 1; x <= fieldSizeX; x++ ) {
		let columnN = String(x);
		switch( columnN.length ) {
			case 1:
				firstLine += ' '+ columnN +' ';
				break;
			case 2:
				firstLine += ' '+ columnN;
				break;
			default:
				firstLine += columnN;
				break;
		}
	}

	console.log( firstLine );


	// Отрисовка всего поля
	for ( let y = 1; y <= fieldSizeY; y++ ) {
		let
			line = '',
			lineN = String(y);

		for ( let x = 1; x <= fieldSizeX; x++ ) {
			if ( x === heroX && y === heroY ) {
				line += ' ○ ';
			} else {
				line += ' · ';
			}
		}

		switch( lineN.length ) {
			case 1:
				lineN = lineN +'  ';
				break;
			case 2:
				lineN = lineN + ' ';
				break;
			default:
				lineN = lineN;
				break;
		}

		console.log( lineN + line );
	}

	renderIteration++;
}

// Функция перемещения
function move ( x, y ) {
	if ( x <= 0 ) heroX = 1;
	else if ( x >= fieldSizeX ) heroX = fieldSizeX;
	else heroX = x;

	if ( y <= 0 ) heroY = 1;
	else if ( y >= fieldSizeY ) heroY = fieldSizeY;
	else heroY = y;
}

// Логика перемещения
function logic () {
	window.heroPrevX = heroX;
	window.heroPrevY = heroY;

	if ( heroX < fieldSizeX && heroY % 2 === 1 ) move( heroX + 1, heroY );
	else if ( ( heroX === fieldSizeX && heroY % 2 === 1 ) || ( heroX === 1 && heroY % 2 === 0 ) ) move( heroX, heroY + 1 );
	else if ( heroX > 1 && heroY % 2 === 0 ) move( heroX - 1, heroY );

	if ( heroX === window.heroPrevX && heroY === window.heroPrevY ) move( 0, 0 );
}

render();

setInterval( function() {
	logic();
	render();
}, 400 );
</script>
</body>
</html>
